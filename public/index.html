<html>

<body>
  <p>This examples demonstrates the persistence of the scope.</p>
  <p>When you select a folder, you will be able to read its content even if you restart the app.</p>
  <button id="dialog-dir">Select folder</button>
  <div>
    <input id="file-path">
    <button id="open-file">Open file</button>
  </div>
  <input type="text" style="width: 100%;" disabled id="file"/>

  <script async>
    const dialogDirBtn = document.getElementById('dialog-dir')
    const openFileBtn = document.getElementById('open-file')
    const filePath = document.getElementById('file-path')


    const outDivFile = document.getElementById('file')

    dialogDirBtn.addEventListener('click', () => {
      window.__TAURI__.dialog.open({ multiple: false, directory: true, recursive: false }).then(p => {
          outDivFile.value = p
      })
    })

    openFileBtn.addEventListener('click', () => {
      window.__TAURI__.fs.readBinaryFile(filePath.value).then(p => {
        outDivFile.value = p;
      }).catch(p => outDivFile.value = p)
    })
  </script>
</body>

</html>